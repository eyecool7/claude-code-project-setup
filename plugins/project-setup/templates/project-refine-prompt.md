# 프로젝트 계획서 고도화 방법
이 문서는 사용자가 Claude Code Plan Mode에서 바로 사용 가능한 '프로젝트 계획서 고도화 프롬프트'를 제공하고 사용 방법을 설명한다.

## 사용 방법
1. project-refine-prompt.md를 열어서 프롬프트 내용을 claude code 채팅창에 붙여넣습니다.
2. claude code와 대화하며 project-plan.md 계획서를 고도화하세요.
3. 수정된 계획서를 프로젝트 루트에 project-plan.md로 다시 저장합니다. (기존 파일 덮어쓰기)
4. /project-setup:setup 스킬을 실행하여 다음 단계로 넘어갑니다.

## 전제 조건
- 계획서 작성이 완료되어 `project-plan.md`가 루트에 있어야 한다.

---

# 프로젝트 계획서 고도화 프롬프트 (아래 전체를 Claude Code에 전달)

```
@project-plan.md 를 읽고, 아래 세 단계를 **모두** 완료해야 한다. 어떤 단계도 건너뛸 수 없다.
특히 2단계(스킬 & MCP 검색)는 반드시 실행해야 한다 — 인터뷰만 하고 끝내면 안 된다.

## 1단계: 인터뷰

AskUserQuestionTool을 사용해서 구현 방식, UI/UX, 우려 사항, 트레이드오프 등 모든 것에 대해 상세하게 인터뷰해줘. 단, 뻔한 질문은 하지 마.
충분히 깊이 있게, 완료될 때까지 계속 인터뷰한다.

## 1.5단계: 인터뷰 반영

인터뷰에서 나온 변경사항을 계획서에 반영한다. 검색 전에 계획서를 최신화해야 누락 없이 검색할 수 있다.

반영 대상:
- **섹션 3** (검색 키워드): 인터뷰에서 새로 언급된 라이브러리·서비스·도메인을 키워드 테이블에 추가
- **섹션 4** (구현 설계): 스택 변경, Tier 변경, 에이전트/스킬 추가·삭제 반영
- **섹션 5** (기술 결정): 새 외부 서비스 추가 시 → 섹션 3 키워드에도 동시 추가 (섹션 5 연동 규칙)

반영 후 project-plan.md를 저장한다.

## 2단계: 스킬 & MCP 검색

먼저, 계획서 섹션 5 "외부 서비스 목록"에 있는 서비스 중 섹션 3 키워드 테이블에 빠진 것이 있으면 자동으로 추가한다.
(예: 섹션 5에 Stripe가 있지만 섹션 3에 stripe 키워드가 없으면 → 키워드 테이블에 `| 결제 | stripe, payment | MCP |` 추가)

그 다음, `.claude/skills/skill-discovery/SKILL.md`의 검색 절차를 실행해서
계획서 섹션 3 "툴 & 워크플로우 설계"의 검색 키워드 테이블을 실제 검색 결과로 채워줘.

구체적으로:
1. vive-md 리포를 클론 (`git clone --depth 1 https://github.com/johunsang/vive-md.git /tmp/vive-md`)
2. 계획서의 검색 키워드로 스킬 카탈로그 + MCP 카탈로그 검색
3. 검색 결과 테이블을 사용자에게 보여주고 확인받기
4. 확인된 결과를 계획서 섹션 3에 반영한다. 반영해야 할 산출물 3가지:
   - **스킬 검색 결과 테이블** — 기능별 검색 키워드 + 결과 + 설치/직접구현 판정
   - **MCP 서버 테이블** — 서비스별 MCP 서버명 + 설정
   - **`확정_MCP` JSON 블록** — setup 단계에서 .mcp.json 자동 생성에 사용되는 구조화된 데이터
5. 세 가지 모두 계획서 섹션 3에 기록한다.

검색 소스·절차·규칙은 모두 skill-discovery SKILL.md에 정의되어 있으니 그대로 따른다.

## 최종: 완료 체크리스트

project-plan.md를 저장하기 **전에** 아래 체크리스트를 반드시 확인한다.
하나라도 미완이면 해당 단계로 돌아가서 완료한 후 저장한다.

- [ ] 1단계 인터뷰 완료
- [ ] 1.5단계 인터뷰 반영 → project-plan.md 저장 완료
- [ ] 2단계 vive-md 클론 + 스킬 카탈로그 검색 실행
- [ ] 2단계 MCP 카탈로그 검색 실행
- [ ] 섹션 3에 "(검색 필요)" 또는 빈 결과가 남아있지 않음
- [ ] 섹션 3에 스킬 테이블 + MCP 테이블 + 확정_MCP JSON 블록 기록 완료
- [ ] 검색 결과를 사용자에게 보여주고 확인받음

**CRITICAL: 2단계를 건너뛰면 안 된다.** 커뮤니티에 검증된 스킬이 있는데 직접 만드는 건 낭비다.
인터뷰만 하고 끝내지 말 것 — 검색까지 완료해야 refine이 끝난 것이다.

모두 완료됐으면 최종 스펙을 project-plan.md에 저장해줘.
```

## 출처

- Original idea & workflow credit: **@trq212 (Thariq)**
- Source: Claude Code spec-based development workflow
