# Lessons Learned

개발 중 발견한 패턴, 실수, 해결책을 기록한다.
Claude가 같은 실수를 반복하지 않도록 세션마다 자동 로드됨.

## 기록 포맷

```
### YYYY-MM-DD: 한 줄 요약
- **실패**: 뭘 잘못했는가
- **감지 신호**: 어떻게 알아챘는가
- **방지 규칙**: 다음부터 어떻게 막는가
```

---

### 2026-02-15: 배포 환경변수에 숨겨진 줄바꿈 문자
- **실패**: Vercel 대시보드에서 복사한 Firebase API 키에 `\n`이 포함되어 auth URL이 깨짐. 로컬에서는 정상, 배포 후 "auth/invalid-api-key" 에러 발생.
- **감지 신호**: 로컬 정상 + 배포 실패 → 환경 변수 인코딩 문제 의심
- **방지 규칙**: 배포 전 `cat -A .env`로 숨겨진 문자 확인. `scripts/validate-env.sh` 실행.

### 2026-02-10: 외부 API SDK 버전 미스매치
- **실패**: Gemini SDK의 메서드 시그니처가 변경되어 30건 요약 전부 실패. 빌드는 통과했지만 런타임에 TypeError.
- **감지 신호**: `npx tsc --noEmit` 통과 + 런타임 에러 → SDK 메서드가 타입 정의와 실제 동작 불일치
- **방지 규칙**: 새 SDK 추가 시 최소 1건 테스트 호출로 실동작 확인 후 기능 구현. `npm outdated`로 SDK 버전 확인.

### 2026-02-08: 잘못된 디렉토리에서 작업
- **실패**: 모노레포에서 잘못된 서브 디렉토리를 프로젝트 루트로 인식하고 파일을 생성/수정함. 세션 절반을 낭비한 후 발견.
- **감지 신호**: import 경로 에러, package.json 없는 디렉토리에서 작업
- **방지 규칙**: 작업 시작 전 `pwd` + 핵심 파일(package.json, CLAUDE.md) 존재 확인. 모호하면 사용자에게 확인.

(아래에 기록 추가)
